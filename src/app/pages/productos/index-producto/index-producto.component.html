<app-nav></app-nav>

<div class="ps-page" >
  <div class="ps-shop ps-shop--sidebar">
    <div class="container-fluid">
      <!-- SIDEBAR  -->
      <div class="ps-shop__container">
        <div [ngClass]="{'ps-panel--sidebar': !showFilters}" id="modalFilter">
          <div class="ps-panel__header" *ngIf="!showFilters">
              <a class="ps-panel__close" style="cursor: pointer;" (click)="openFilter()"><i class="icon-cross"></i></a>
          </div>
          <div class="ps-panel__content">
            <div [ngClass]="{'ps-shop__sidebar': true, 'pt-0': !showFilters}" [ngStyle]="{'max-width': !showFilters && '100%'}">
            
              <aside class="widget widget_shop widget_categories">
                <h3 class="widget-title">{{ 'shop.item_uno' | translate }}</h3>
                <ul class="ps-list--under">
                  <li><a class="ps-link--line" (click)="setByCategory('todos')">Reset filtros</a></li>
                  <ng-container *ngFor="let item of categorias;let indice = index">
                    <li (click)="setByCategory(item._id)"><a class="ps-link--line" style="cursor: pointer;">{{item.titulo}}</a></li>
                  </ng-container>
                  
        
                </ul>
              </aside>
              <aside class="widget widget_shop widget_shop-filter">
                <h3 class="widget-title">{{ 'shop.item_dos' | translate }}</h3>
                <div class="ps-sliderr" id="ps-sliderr" data-default-min="0" data-default-max="100" data-max="100" data-step="5"></div>
      
      
                <p class="ps-slider__meta">{{ 'shop.item_dos' | translate }}:
                  <span class="ps-slider__value ps-slider__min"></span>-
                  <span class="ps-slider__value ps-slider__max"></span>
                </p>
      
                <div class="row mt-3">
                  <div class="col-12">
                    <app-button
                      [text]="'shop.item_tres' | translate"
                      (click)="buscar_precios()"
                      class="ps-btn--sm btn-block"
                    ></app-button>
                  </div>
                </div>
      
                <div class="widget__colors">
                  <h3 class="widget-title">Tallas</h3>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  Todos</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-todos" value="todos" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  14</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-14" value="14" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  16</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-16" value="16" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  XS</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-XS" value="XS" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  S</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-S" value="S" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  M</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-M" value="M" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  L</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-L" value="L" [(ngModel)]="filter_cat_tallas">
                  </div>
                  <div class="ps-color black active" style="margin-bottom:10px !important">
                    <span class="ps-color__left">
                      <i>  XL</i>
                    </span>
                    <input style="width: 15px;height: auto;margin-top: 8px !important;" type="radio" name="group2" (change)="buscar_por_talla()" class="form-control radiocls" id="tallas-XL" value="XL" [(ngModel)]="filter_cat_tallas">
                  </div>
                </div>
         
              </aside>
              <!-- <aside class="widget widget_shop widget_product">
                <h3 class="widget-title">{{ 'shop.item_cuatro' | translate }}</h3>
                <ng-container *ngFor="let item of mas_vendidos;let idx = index">
                  <div class="ps-product--sidebar">
                    <div class="ps-product__thumbnail">
                      <a class="ps-product__overlay" [routerLink]="['/productos/'+item.producto.slug]" ></a><img [src]="item.producto.portada.secure_url" alt=""></div>
                      
                    <div class="ps-product__content"><a class="ps-product__title" [routerLink]="['/productos/'+item.producto.slug]" >{{item.producto.titulo}}</a>
                      
                      <p class="ps-product__price">
                        <ng-container *ngIf="currency != 'MXN'">
                          <span class="text-danger mr-3" *ngIf="item.producto.precio_antes_dolares >= 1">
                            <del>${{item.producto.precio_antes_dolares}}</del>
                          </span>
                          <span><b>${{item.producto.precio_dolar}}</b></span>
                        </ng-container>
                        <ng-container *ngIf="currency == 'MXN'">
                          <span class="text-danger mr-3" *ngIf="item.producto.precio_antes_soles >= 1">
                            <del>$MXN{{item.producto.precio_antes_soles}}</del>
                          </span>
                          <span><b>$MXN{{item.producto.precio}}</b></span>
                        </ng-container>
                      </p>
                    </div>
                  </div>
                </ng-container>
              </aside> -->
            </div>
          </div>
      </div>


        <div class="ps-shop__wrapper">
          <div class="ps-shop__header" style="padding-bottom: 50px !important;">
            <div class="ps-shop__left">
              <h1>Tienda</h1>
              <ul class="ps-breadcrumb">
                <li><a [routerLink]="['/']" routerLinkActive="router-link-active" >Home</a></li>
                <li>Tienda</li>
              </ul>
            </div>
            <div class="ps-shop__right">
              <p><strong>{{productos.length}}</strong> Productos</p>
              <div class="ps-shop__actions d-flex align-items-center" style="gap: 10px">
                <a
                  *ngIf="!showFilters" 
                  (click)="openFilter()"
                  class="ps-toggle--sidebar pr-0"
                  style="font-size: 2.5rem;"
                >
                  <i class="icon-funnel"></i>
                </a>
                <div class="ps-shop__sorting" style="    padding-right: 0px !important;"><span>{{ 'shop.item_cinco' | translate }}</span>
                  <select class="form-control"  name="sort_by" [(ngModel)]="sort_by" (change)="orden_por()" style="border: none;
                  font-size: 1.5rem;">
                    <option value="Defecto">Defecto</option>
            
                    <option value="+-Precio">Mayor - menor precio</option>
                    <option value="-+Precio">Menor - mayor precio</option>
                    <option value="azTitulo">A - Z</option>
                    <option value="zaTitulo">Z - A</option>
                  </select>
                </div>
                
              </div>
            </div>
          </div>
          <div class="ps-shop__filter-panel"></div>
          
          <div *ngIf="!loadingProductos; else productSkeleton" class="ps-shop__content">
            <div class="row mb-5">
              <ng-container *ngFor="let item of productos| slice: (page-1)*pageSize : (page-1) * pageSize + pageSize">
                  <div class="{{isAvailable(item.visibilidad, currency) && 'col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3'}}">
                    <app-producto
                      [producto]="item"
                      [currency]="currency"
                    ></app-producto>
                  </div>
              </ng-container>
            </div>

            <div class="row">
              <div class="col">
                <ngb-pagination
                  [(page)]="page"
                  [pageSize]="pageSize"
                  [collectionSize]="productos.length"
                ></ngb-pagination>
              </div>
            </div>
          </div>
          <ng-template #productSkeleton>
            <div class="row">
              <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3" *ngFor="let item of items">
                <ngx-skeleton-loader 
                  [theme]="{
                    'border-radius': '0',
                    height: '300px'
                  }"
                ></ngx-skeleton-loader>
                <ngx-skeleton-loader
                  [theme]="{
                    'border-radius': '0',
                    height: '25px'
                  }"
                ></ngx-skeleton-loader>
                <div class="d-flex flex-column">
                  <ngx-skeleton-loader
                    count="2"
                    [theme]="{
                      display: 'block',
                      'border-radius': '0',
                      height: '20px',
                      width: '50%'
                    }"
                  ></ngx-skeleton-loader>
                </div>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>

</div>

<app-footer></app-footer>